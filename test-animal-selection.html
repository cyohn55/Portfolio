<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Animal Selection</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #222;
            color: white;
            padding: 20px;
        }
        
        .animal-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            max-width: 800px;
            margin: 2rem 0;
        }
        
        .animal-card {
            background: rgba(255,255,255,0.1);
            border: 3px solid transparent;
            border-radius: 15px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            text-align: center;
            user-select: none;
        }
        
        .animal-card:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-5px);
        }
        
        .animal-card.selected {
            border-color: #00ff88;
            background: rgba(0,255,136,0.2);
            box-shadow: 0 0 20px rgba(0,255,136,0.5);
        }
        
        .start-btn {
            background: linear-gradient(45deg, #00ff88, #00cc6a);
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.5;
            pointer-events: none;
            margin-top: 2rem;
        }
        
        .start-btn.enabled {
            opacity: 1;
            pointer-events: all;
        }
        
        .debug-output {
            background: #111;
            border: 1px solid #333;
            padding: 10px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
        
        .debug-line {
            margin: 2px 0;
        }
        
        .success { color: #0f0; }
        .error { color: #f00; }
        .info { color: #ff0; }
    </style>
</head>
<body>
    <h1>🧪 Animal Selection Test</h1>
    <p>Click animals to select them (max 3). Check console and debug output below.</p>
    
    <div class="animal-selection" id="animalSelection">
        <div class="animal-card" data-animal="bear">
            <h3>🐻 Bear</h3>
            <p>Strong & Durable</p>
        </div>
        <div class="animal-card" data-animal="bee">
            <h3>🐝 Bee</h3>
            <p>Fast & Agile</p>
        </div>
        <div class="animal-card" data-animal="turtle">
            <h3>🐢 Turtle</h3>
            <p>Defensive</p>
        </div>
        <div class="animal-card" data-animal="fox">
            <h3>🦊 Fox</h3>
            <p>Cunning & Quick</p>
        </div>
        <div class="animal-card" data-animal="frog">
            <h3>🐸 Frog</h3>
            <p>Amphibious</p>
        </div>
        <div class="animal-card" data-animal="owl">
            <h3>🦉 Owl</h3>
            <p>Air Support</p>
        </div>
        <div class="animal-card" data-animal="pig">
            <h3>🐷 Pig</h3>
            <p>Resource Gatherer</p>
        </div>
        <div class="animal-card" data-animal="cat">
            <h3>🐱 Cat</h3>
            <p>Stealth Hunter</p>
        </div>
        <div class="animal-card" data-animal="chicken">
            <h3>🐔 Chicken</h3>
            <p>Rapid Breeder</p>
        </div>
        <div class="animal-card" data-animal="dolphin">
            <h3>🐬 Dolphin</h3>
            <p>Naval Unit</p>
        </div>
    </div>
    
    <button class="start-btn" id="startBtn">Select 3 more animals</button>
    
    <div class="debug-output" id="debugOutput">
        <div class="debug-line info">Debug output will appear here...</div>
    </div>

    <script>
        const debugOutput = document.getElementById('debugOutput');
        
        function debugLog(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `debug-line ${type}`;
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            debugOutput.appendChild(div);
            debugOutput.scrollTop = debugOutput.scrollHeight;
            console.log(message);
        }

        function setupAnimalSelection() {
            debugLog('🔧 Setting up animal selection system...', 'info');
            
            let selectedAnimals = [];
            const startBtn = document.getElementById('startBtn');
            const animalCards = document.querySelectorAll('.animal-card');
            
            debugLog(`🐾 Found ${animalCards.length} animal cards`, 'success');
            
            // Test if elements exist
            debugLog(`📦 Start button: ${startBtn ? 'Found' : 'Missing'}`, startBtn ? 'success' : 'error');
            debugLog(`📦 Animal selection container: ${document.getElementById('animalSelection') ? 'Found' : 'Missing'}`, 'success');
            
            animalCards.forEach((card, index) => {
                const animal = card.dataset.animal;
                debugLog(`📝 Card ${index}: ${animal} - ${card.dataset.animal ? 'Has data-animal' : 'Missing data-animal'}`, card.dataset.animal ? 'success' : 'error');
                
                card.addEventListener('click', (event) => {
                    debugLog(`🐾 Animal card clicked: ${animal}`, 'info');
                    
                    // Prevent event bubbling
                    event.stopPropagation();
                    event.preventDefault();
                    
                    if (card.classList.contains('selected')) {
                        // Deselect
                        card.classList.remove('selected');
                        const index = selectedAnimals.indexOf(animal);
                        if (index > -1) selectedAnimals.splice(index, 1);
                        debugLog(`➖ Deselected: ${animal}`, 'info');
                    } else if (selectedAnimals.length < 3) {
                        // Select
                        card.classList.add('selected');
                        selectedAnimals.push(animal);
                        debugLog(`➕ Selected: ${animal}`, 'success');
                    } else {
                        debugLog(`⚠️ Cannot select more than 3 animals (currently have: ${selectedAnimals.join(', ')})`, 'error');
                        return;
                    }
                    
                    debugLog(`📊 Current selection: [${selectedAnimals.join(', ')}] (${selectedAnimals.length}/3)`, 'info');
                    
                    // Update start button
                    if (selectedAnimals.length === 3) {
                        startBtn.classList.add('enabled');
                        startBtn.textContent = 'Start Game!';
                        debugLog('✅ Ready to start - 3 animals selected', 'success');
                    } else {
                        startBtn.classList.remove('enabled');
                        startBtn.textContent = `Select ${3 - selectedAnimals.length} more animals`;
                    }
                });
                
                // Test click event by adding a simple test listener
                card.addEventListener('mouseenter', () => {
                    debugLog(`👆 Hovering over: ${animal}`, 'info');
                });
            });
            
            startBtn.addEventListener('click', (event) => {
                debugLog(`🚀 Start button clicked, selected animals: ${selectedAnimals.length}`, 'info');
                
                if (selectedAnimals.length === 3) {
                    event.preventDefault();
                    event.stopPropagation();
                    debugLog(`🎮 Would start game with: ${selectedAnimals.join(', ')}`, 'success');
                    alert(`Game would start with: ${selectedAnimals.join(', ')}`);
                } else {
                    debugLog('⚠️ Need to select 3 animals first', 'error');
                }
            });
            
            debugLog('🔧 Animal selection system setup complete', 'success');
        }

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            debugLog('🚀 DOM loaded - starting test', 'success');
            setupAnimalSelection();
            
            // Test button click
            debugLog('🧪 Click any animal card to test selection', 'info');
        });
    </script>
</body>
</html>
